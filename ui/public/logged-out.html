<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Signed out</title>
  <style>
    body{margin:0;display:grid;place-items:center;height:100vh;background:#0b0f14;color:#e6eef7;font:14px/1.5 system-ui,Segoe UI,Inter,Roboto}
    .card{max-width:520px;padding:24px;border-radius:16px;background:rgba(255,255,255,.04);
          border:1px solid rgba(255,255,255,.08)}
    .btn{appearance:none;border:0;border-radius:12px;padding:12px 16px;font-weight:700;
         background:linear-gradient(135deg,#6ee7ff,#8b5cf6);color:#041018;cursor:pointer}
    .muted{opacity:.8}
  </style>
</head>
<body>
  <div class="card">
    <h2>Youâ€™re signed out</h2>
    <p class="muted">We cleared local data and caches on this device.</p>
    <button id="login" class="btn">Sign in again</button>
  </div>
  <script>
    (async () => {
      // Unregister SWs
      if ('serviceWorker' in navigator) {
        const regs = await navigator.serviceWorker.getRegistrations();
        await Promise.all(regs.map(r => r.unregister().catch(()=>{})));
      }
      // Clear caches
      if (window.caches) {
        const keys = await caches.keys();
        await Promise.all(keys.map(k => caches.delete(k)));
      }
      // Clear IndexedDB db used by the app
      await new Promise(res => {
        const req = indexedDB.deleteDatabase('rioforms-db');
        req.onsuccess = req.onerror = req.onblocked = () => res();
      });
      localStorage.clear(); sessionStorage.clear();
    })();
    document.getElementById('login').onclick = () => {
      // Kick off a fresh login with App Router
      location.assign('/login');
    };
  </script>
</body>
</html>
